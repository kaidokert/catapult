{
  "comments": [
    {
      "key": {
        "uuid": "66c924ce_82a2ad7a",
        "filename": "third_party/typ/run",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2019-07-18T00:26:42Z",
      "side": 1,
      "message": "I went down this path (of running things under both 2 and 3 at once) at one point when this was a standalone repo, but eventually decided it made life harder, not easier (e.g., if you just wanted to only run one version to test things).\n\nSo, I\u0027d skip all of this and leave this file alone.",
      "revId": "e0011c76e2828346aab90139a50c4d2aea9fc756",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2d961dbd_582d4b16",
        "filename": "third_party/typ/run",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2019-07-18T00:35:40Z",
      "side": 1,
      "message": "what I\u0027ve done with other projects is explicitly run via the preupload hooks. I think it\u0027s reasonable to require people running `gut cl` to have python2 \u0026 python3 installed. those can be responsible for doing `python2 run_tests`.",
      "parentUuid": "66c924ce_82a2ad7a",
      "revId": "e0011c76e2828346aab90139a50c4d2aea9fc756",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d05b8f43_0714d711",
        "filename": "third_party/typ/run",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2019-07-18T00:59:03Z",
      "side": 1,
      "message": "Yeah, or I\u0027d use tox or something. I think it\u0027s still TBD how we\u0027ll want to enforce python2/3 compat generally for stuff like this in src and the dependent projects.",
      "parentUuid": "2d961dbd_582d4b16",
      "revId": "e0011c76e2828346aab90139a50c4d2aea9fc756",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f2745d0_dd4a5d4d",
        "filename": "third_party/typ/run",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1163549
      },
      "writtenOn": "2019-07-18T17:36:57Z",
      "side": 1,
      "message": "Removed these changes.",
      "parentUuid": "d05b8f43_0714d711",
      "revId": "e0011c76e2828346aab90139a50c4d2aea9fc756",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "737a2e9d_9a31bcf9",
        "filename": "third_party/typ/typ/expectations_parser.py",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2019-07-18T00:26:42Z",
      "side": 1,
      "message": "This won\u0027t work in python 2 if reason is a unicode string. You probably don\u0027t want to prevent that. \n\nI think the convention we\u0027re moving to is:\n\n    isinstance(reason, str) or sys.version_info.major \u003d\u003d 2 and isinstance(reason, unicode)\n\n(which is way more awkward, admittedly)\n\nor doing something like we do in host_fake.py to redefine unicode",
      "revId": "e0011c76e2828346aab90139a50c4d2aea9fc756",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "25e6850a_a1993912",
        "filename": "third_party/typ/typ/expectations_parser.py",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2019-07-18T00:35:40Z",
      "side": 1,
      "message": "pylint won\u0027t like that form I don\u0027t think. can we rely on the six module?",
      "parentUuid": "737a2e9d_9a31bcf9",
      "revId": "e0011c76e2828346aab90139a50c4d2aea9fc756",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e2de380c_1eb136bc",
        "filename": "third_party/typ/typ/expectations_parser.py",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2019-07-18T00:59:03Z",
      "side": 1,
      "message": "which form won\u0027t python like? \n\nIt looks like six is part of the vpython environment, but I\u0027m not sure if it\u0027s generally available if people try to run things directly under python. I\u0027ve tried to avoid six in the past where possible, and there\u0027s still a part of me that would like to be able to split typ out into a separate standalone project again (as a subtree mirror of this; this\u0027d still be the source of truth) and I\u0027d like to avoid the dependency there.",
      "parentUuid": "25e6850a_a1993912",
      "revId": "e0011c76e2828346aab90139a50c4d2aea9fc756",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e22b02a1_3ea16ad5",
        "filename": "third_party/typ/typ/expectations_parser.py",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2019-07-18T01:02:23Z",
      "side": 1,
      "message": "python should be fine, it\u0027s pylint that would complain :)",
      "parentUuid": "e2de380c_1eb136bc",
      "revId": "e0011c76e2828346aab90139a50c4d2aea9fc756",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e830d37c_f0b29913",
        "filename": "third_party/typ/typ/expectations_parser.py",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2019-07-18T16:07:26Z",
      "side": 1,
      "message": "sorry, I meant pylint.",
      "parentUuid": "e22b02a1_3ea16ad5",
      "revId": "e0011c76e2828346aab90139a50c4d2aea9fc756",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dbbb623d_f4a63ebb",
        "filename": "third_party/typ/typ/expectations_parser.py",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1163549
      },
      "writtenOn": "2019-07-18T17:36:57Z",
      "side": 1,
      "message": "six is included in catapult/third_party, so we should be able to rely on it as typ currently is. I\u0027ll leave it to Dirk to decide whether he wants to take that dependency or not.\n\nIn the meantime, I\u0027ve added a helper to python_2_3_compat for this.",
      "parentUuid": "e830d37c_f0b29913",
      "revId": "e0011c76e2828346aab90139a50c4d2aea9fc756",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2edc6036_1a8546cf",
        "filename": "third_party/typ/typ/python_2_3_compat.py",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 1000768
      },
      "writtenOn": "2019-07-18T00:35:40Z",
      "side": 1,
      "message": "bad indent",
      "revId": "e0011c76e2828346aab90139a50c4d2aea9fc756",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0f96595f_49cce703",
        "filename": "third_party/typ/typ/python_2_3_compat.py",
        "patchSetId": 3
      },
      "lineNbr": 1,
      "author": {
        "id": 1163549
      },
      "writtenOn": "2019-07-18T17:36:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2edc6036_1a8546cf",
      "revId": "e0011c76e2828346aab90139a50c4d2aea9fc756",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ba7a178_00cf9bce",
        "filename": "third_party/typ/typ/python_2_3_compat.py",
        "patchSetId": 3
      },
      "lineNbr": 28,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2019-07-18T00:26:42Z",
      "side": 1,
      "message": "I think this whole routine is either confused or just wrong; as written, it\u0027ll return a unicode string in python 2 and a bytestring in python3 (I think).\n\nI think you just want to unconditionally do:\n\n  def str_to_bytes(msg):\n    return msg.encode()\n\nYou could return msg unmodified in python2, but then you\u0027d have things that\u0027d pass in python 2 that\u0027d fail in python 3 if they were not valid utf8-encoded strings.",
      "revId": "e0011c76e2828346aab90139a50c4d2aea9fc756",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "96d865ea_a5326741",
        "filename": "third_party/typ/typ/python_2_3_compat.py",
        "patchSetId": 3
      },
      "lineNbr": 28,
      "author": {
        "id": 1163549
      },
      "writtenOn": "2019-07-18T00:30:37Z",
      "side": 1,
      "message": "For whatever reason, msg.encode() will return a str type in Python 2.",
      "parentUuid": "9ba7a178_00cf9bce",
      "revId": "e0011c76e2828346aab90139a50c4d2aea9fc756",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "038d0c34_b4c1ab1f",
        "filename": "third_party/typ/typ/python_2_3_compat.py",
        "patchSetId": 3
      },
      "lineNbr": 28,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2019-07-18T00:33:46Z",
      "side": 1,
      "message": "But that\u0027s what you want, right? (since \u0027\u0027 and b\u0027\u0027 are the same thing in python 2).",
      "parentUuid": "96d865ea_a5326741",
      "revId": "e0011c76e2828346aab90139a50c4d2aea9fc756",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06a6b3f9_3672785c",
        "filename": "third_party/typ/typ/python_2_3_compat.py",
        "patchSetId": 3
      },
      "lineNbr": 28,
      "author": {
        "id": 1163549
      },
      "writtenOn": "2019-07-18T17:36:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "038d0c34_b4c1ab1f",
      "revId": "e0011c76e2828346aab90139a50c4d2aea9fc756",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}